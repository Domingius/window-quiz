<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="static/css/index.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>QUIZ</title>
</head>
<body class="body">
    <div class="container text-center">
        <div class="row align-items-start">
            <div class="col"></div>
            <div class="col">
                <h1><strong>RISPONDI ALLE DOMANDE DEL QUIZ</strong></h1>
                <div class="testo"></div>
                <form>
                    <input type="text" name="risposta" id="risposta"/>
                    <input type="submit" name="Rispondi" class="button" id="butt"/>
                </form>
                <div class="risultato" id="risultato"></div>
            </div>
            <div class="col"></div>
        </div>
    </div>

    <script>
        let Domande = [
            { "n_domanda": 1, "domanda": "<strong>Di che colore è il cielo?</strong>", "corretta": "azzurro", "punteggio": 1 },
            { "n_domanda": 2, "domanda": "<strong>Come si chiama la console di Sony?</strong>", "corretta": "playstation", "punteggio": 1 },
            { "n_domanda": 3, "domanda": "<strong>Di che colore è il cavallo bianco di Napoleone?</strong>", "corretta": "bianco", "punteggio": 1 },
            { "n_domanda": 4, "domanda": "<strong>Che tipo di animali sono i ragni e gli scorpioni?</strong>", "corretta": "aracnidi", "punteggio": 1 },
            { "n_domanda": 5, "domanda": "<strong>Quando è finita definitivamente la II guerra mondiale?</strong>", "corretta": "1945", "punteggio": 1 }
        ];

        window.addEventListener('load', function() {
            let punteggio = 0;
            let i = 0;
            let testo = document.querySelector(".testo");
            let risultato = document.getElementById("risultato");
            let risposta = document.getElementById("risposta");
            let bottone = document.getElementById("butt");
            let form = document.querySelector("form");

            function question() {
                if (i < Domande.length) {
                    testo.innerHTML = Domande[i].n_domanda + ". " + Domande[i].domanda;
                    risposta.value = "";
                } else {
                    testo.innerHTML = "<strong>Il quiz è finito! Hai totalizzato: " + punteggio + " punti/o.</strong>";
                    bottone.disabled = true;
                }
            }

            form.addEventListener("submit", function(event) {
                event.preventDefault()
                if (i < Domande.length) {
                    let rispostaUtente = risposta.value.trim().toLowerCase();
                    let corretta = Domande[i].corretta.toLowerCase();
                    
                    if (rispostaUtente === corretta) {
                        punteggio += Domande[i].punteggio;
                        risultato.innerHTML = "<strong>Risposta corretta!</strong>";
                    } else {
                        risultato.innerHTML = "<strong>Risposta sbagliata! La risposta giusta era: </strong>" + Domande[i].corretta;
                    }

                    i++;
                }

                question();
            });

            question();
        });
    </script>
</body>
</html>
